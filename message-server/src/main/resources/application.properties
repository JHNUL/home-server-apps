# MQTT
mp.messaging.incoming.shelly-status.topic=+/status/#
mp.messaging.incoming.shelly-status.connector=smallrye-mqtt
mp.messaging.incoming.shelly-status.host=localhost
mp.messaging.incoming.shelly-status.port=1883
mp.messaging.incoming.shelly-status.auto-generated-client-id=true

# WebSocket
quarkus.websockets-next.server.traffic-logging.enabled=true
quarkus.websockets-next.server.traffic-logging.text-payload-limit=50
quarkus.log.category."io.quarkus.websockets.next.traffic".level=DEBUG

# Datasource
quarkus.datasource.username=verysecretuser
quarkus.datasource.password=verysecretpassword
quarkus.datasource.reactive.url=postgresql://localhost:54322/homeserver
quarkus.datasource.db-kind=postgresql
quarkus.datasource.reactive.enable-metrics=true

# Hibernate
%dev.quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.dialect=org.hibernate.dialect.PostgreSQLDialect

# Security
quarkus.oidc.auth-server-url=https://localhost:8443/realms/homeserver
quarkus.oidc.client-id=message-server
quarkus.oidc.credentials.secret=verysecret
quarkus.oidc.tls.verification=none
quarkus.keycloak.policy-enforcer.enabled=true

# Policy configuration
# NB! everything allowed bc auth setup is not complete
quarkus.http.auth.permission.permit1.paths=/devices,/devices/*,/users/*
quarkus.http.auth.permission.permit1.policy=permit
quarkus.http.auth.permission.permit1.methods=GET,DELETE
quarkus.keycloak.policy-enforcer.paths1.paths=/devices,/devices/*,/users/*
quarkus.keycloak.policy-enforcer.paths1.enforcement-mode=DISABLED